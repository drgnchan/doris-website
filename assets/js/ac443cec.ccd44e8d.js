"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[97748],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=i.createContext({}),s=function(e){var t=i.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=s(e.components);return i.createElement(p.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(n),u=a,h=c["".concat(p,".").concat(u)]||c[u]||m[u]||r;return n?i.createElement(h,o(o({ref:t},d),{},{components:n})):i.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},38335:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var i=n(87462),a=(n(67294),n(3905));const r={title:"Setting Up dev env for FE - IntelliJ IDEA",language:"en"},o=void 0,l={unversionedId:"developer-guide/fe-idea-dev",id:"developer-guide/fe-idea-dev",title:"Setting Up dev env for FE - IntelliJ IDEA",description:"\x3c!--",source:"@site/community/developer-guide/fe-idea-dev.md",sourceDirName:"developer-guide",slug:"/developer-guide/fe-idea-dev",permalink:"/community/developer-guide/fe-idea-dev",draft:!1,tags:[],version:"current",frontMatter:{title:"Setting Up dev env for FE - IntelliJ IDEA",language:"en"},sidebar:"community",previous:{title:"Setting FE dev env - Eclipse",permalink:"/community/developer-guide/fe-eclipse-dev"},next:{title:"FE development and debugging environment - Visual Studio Code (VSCode)",permalink:"/community/developer-guide/fe-vscode-dev"}},p={},s=[{value:"1. Environmental Preparation",id:"1-environmental-preparation",level:2},{value:"2. Debug",id:"2-debug",level:2},{value:"3. Custom FE configuration",id:"3-custom-fe-configuration",level:2},{value:"4. Setting Environment Variables",id:"4-setting-environment-variables",level:2},{value:"5. Config options",id:"5-config-options",level:2},{value:"6. Start FE",id:"6-start-fe",level:2}],d={toc:s},c="wrapper";function m(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,i.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"setting-up-development-environment-for-fe-using-intellij-idea"},"Setting Up Development Environment for FE using IntelliJ IDEA"),(0,a.kt)("h2",{id:"1-environmental-preparation"},"1. Environmental Preparation"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Git"),(0,a.kt)("li",{parentName:"ul"},"JDK1.8+"),(0,a.kt)("li",{parentName:"ul"},"IntelliJ IDEA"),(0,a.kt)("li",{parentName:"ul"},"Maven (Optional, IDEA shipped embedded Maven3)")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Git clone codebase from ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/apache/doris.git"},"https://github.com/apache/doris.git"))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Use IntelliJ IDEA to open the code root directory")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"If you only develop fe without compiling thirdparty, you need to install thrift, and copy or connect thrift to the ",(0,a.kt)("inlineCode",{parentName:"p"},"thirdparty/installed/bin")," directory"),(0,a.kt)("p",{parentName:"li"},"Install ",(0,a.kt)("inlineCode",{parentName:"p"},"thrift 0.16.0")," (Note: ",(0,a.kt)("inlineCode",{parentName:"p"},"Doris")," 0.15 - 1.2 builds on ",(0,a.kt)("inlineCode",{parentName:"p"},"thrift 0.13.0"),", the latest code is built using ",(0,a.kt)("inlineCode",{parentName:"p"},"thrift 0.16.0"),")"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"The following examples use 0.16.0 as an example. If you need 0.13.0, please change 0.16.0 in the example below to 0.13.0. ")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Windows: "),(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},"Download: ",(0,a.kt)("inlineCode",{parentName:"li"},"http://archive.apache.org/dist/thrift/0.16.0/thrift-0.16.0.exe")),(0,a.kt)("li",{parentName:"ol"},"Copy: Copy the file to ",(0,a.kt)("inlineCode",{parentName:"li"},"./thirdparty/installed/bin")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"MacOS: "),(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"brew tap-new $USER/local-tap"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"brew extract --version='0.16.0' thrift $USER/local-tap"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"brew install thrift@0.16.0")),(0,a.kt)("p",{parentName:"li"},"If there is an error related to downloading, you can modify the following files:"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"/usr/local/Homebrew/Library/Taps/$USER/homebrew-local-tap/Formula/thrift\\@0.16.0.rb")),(0,a.kt)("p",{parentName:"li"},"Modify:"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},'url "https://www.apache.org/dyn/closer.lua?path=thrift/0.16.0/thrift-0.16.0.tar.gz"')),(0,a.kt)("p",{parentName:"li"},"To:"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},'url "https://archive.apache.org/dist/thrift/0.16.0/thrift-0.16.0.tar.gz"')),(0,a.kt)("p",{parentName:"li"},"Reference: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://gist.github.com/tonydeng/02e571f273d6cce4230dc8d5f394493c"))))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Linux:"),(0,a.kt)("ol",{parentName:"li"},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Download source: ",(0,a.kt)("inlineCode",{parentName:"p"},"wget https://archive.apache.org/dist/thrift/0.16.0/thrift-0.16.0.tar.gz"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Install dependencies: ",(0,a.kt)("inlineCode",{parentName:"p"},"yum install -y autoconf automake libtool cmake ncurses-devel openssl-devel lzo-devel zlib-devel gcc gcc-c++"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"tar zxvf thrift-0.16.0.tar.gz"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"cd thrift-0.16.0"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"./configure --without-tests"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"make"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"make install")),(0,a.kt)("p",{parentName:"li"},"Validate thrift version: ",(0,a.kt)("inlineCode",{parentName:"p"},"thrift --version"),"  "),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"Note: If you have compiled Doris, you do not need to install thrift, you can directly use $DORIS_HOME/thirdparty/installed/bin/thrift"))))))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"If it is a Mac or Linux environment, the code can be automatically generated by the following command:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"sh generated-source.sh\n")),(0,a.kt)("p",{parentName:"li"},"If version before 1.2, using:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"cd fe\nmvn generate-sources\n")),(0,a.kt)("p",{parentName:"li"},"Or:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"cd fe && mvn clean install -DskipTests\n")))),(0,a.kt)("p",null,"Or run the maven command through the graphical interface to generate:"),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(21526).Z,width:"794",height:"790"})),(0,a.kt)("p",null,"If you are developing on the OS which lack of support to run ",(0,a.kt)("inlineCode",{parentName:"p"},"shell script")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"make")," such as Windows, a workround here\nis generate codes in Linux and copy them back. Using Docker should also be an option."),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"If a help document has not been generated, go to the docs directory and run",(0,a.kt)("inlineCode",{parentName:"p"},"sh build_help_zip.sh"),"\uff0c"),(0,a.kt)("p",{parentName:"li"},"Then copy help-resource.zip from build to fe/fe-core/target/classes"))),(0,a.kt)("h2",{id:"2-debug"},"2. Debug"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Import ",(0,a.kt)("inlineCode",{parentName:"p"},"./fe")," into IDEA")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Follow the picture to create the folders (The directory may exist in the new version. If it exists, skip it, otherwise create it.)"))),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(93085).Z,width:"1077",height:"879"})),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Build ",(0,a.kt)("inlineCode",{parentName:"li"},"ui")," project , and copy files from directory ",(0,a.kt)("inlineCode",{parentName:"li"},"ui/dist")," into directory ",(0,a.kt)("inlineCode",{parentName:"li"},"webroot")," ( you can skip this step , if you don't need ",(0,a.kt)("inlineCode",{parentName:"li"},"Doris")," UI )")),(0,a.kt)("h2",{id:"3-custom-fe-configuration"},"3. Custom FE configuration"),(0,a.kt)("p",null,"Copy below content into ",(0,a.kt)("inlineCode",{parentName:"p"},"conf/fe.conf")," and tune it to fit your environment(Note: If developed using",(0,a.kt)("inlineCode",{parentName:"p"},"Mac"),", since",(0,a.kt)("inlineCode",{parentName:"p"},"docker for Mac"),"does not support",(0,a.kt)("inlineCode",{parentName:"p"},"Host"),"mode,",(0,a.kt)("inlineCode",{parentName:"p"},"be"),"needs to be exposed using",(0,a.kt)("inlineCode",{parentName:"p"},"-p")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"fe.conf")," ",(0,a.kt)("inlineCode",{parentName:"p"},"priority_networks")," configured to be accessible within the container, such as WIFI Ip)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# "License"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#   http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing,\n# software distributed under the License is distributed on an\n# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n# KIND, either express or implied.  See the License for the\n# specific language governing permissions and limitations\n# under the License.\n\n#####################################################################\n## The uppercase properties are read and exported by bin/start_fe.sh.\n## To see all Frontend configurations,\n## see fe/src/org/apache/doris/common/Config.java\n#####################################################################\n\n# the output dir of stderr and stdout \nLOG_DIR = ${DORIS_HOME}/log\n\nDATE = `date +%Y%m%d-%H%M%S`\nJAVA_OPTS="-Xmx2048m -XX:+UseMembar -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+PrintGCDateStamps -XX:+PrintGCDetails -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xloggc:$DORIS_HOME/log/fe.gc.log.$DATE"\n\n# For jdk 9+, this JAVA_OPTS will be used as default JVM options\nJAVA_OPTS_FOR_JDK_9="-Xmx4096m -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=7 -XX:+CMSClassUnloadingEnabled -XX:-CMSParallelRemarkEnabled -XX:CMSInitiatingOccupancyFraction=80 -XX:SoftRefLRUPolicyMSPerMB=0 -Xlog:gc*:$DORIS_HOME/log/fe.gc.log.$DATE:time"\n\n##\n## the lowercase properties are read by main program.\n##\n\n# INFO, WARN, ERROR, FATAL\nsys_log_level = INFO\n\n# store metadata, create it if it is not exist.\n# Default value is ${DORIS_HOME}/doris-meta\n# meta_dir = ${DORIS_HOME}/doris-meta\n\nhttp_port = 8030\nrpc_port = 9020\nquery_port = 9030\narrow_flight_sql_port = -1\nedit_log_port = 9010\n\n# Choose one if there are more than one ip except loopback address. \n# Note that there should at most one ip match this list.\n# If no ip match this rule, will choose one randomly.\n# use CIDR format, e.g. 10.10.10.0/24\n# Default value is empty.\n# priority_networks = 10.10.10.0/24;192.168.0.0/16\n\n# Advanced configurations \n# log_roll_size_mb = 1024\n# sys_log_dir = ${DORIS_HOME}/log\n# sys_log_roll_num = 10\n# sys_log_verbose_modules = \n# audit_log_dir = ${DORIS_HOME}/log\n# audit_log_modules = slow_query, query\n# audit_log_roll_num = 10\n# meta_delay_toleration_second = 10\n# qe_max_connection = 1024\n# qe_query_timeout_second = 300\n# qe_slow_log_ms = 5000\n\n')),(0,a.kt)("h2",{id:"4-setting-environment-variables"},"4. Setting Environment Variables"),(0,a.kt)("p",null,"Follow the picture to set runtime Environment Variables in IDEA"),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(92497).Z,width:"2435",height:"1400"})),(0,a.kt)("h2",{id:"5-config-options"},"5. Config options"),(0,a.kt)("p",null,"Because part of the dependency is ",(0,a.kt)("inlineCode",{parentName:"p"},"provided"),", idea needs to do a special config. Click on the right ",(0,a.kt)("inlineCode",{parentName:"p"},"Modify Options")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"Run/Debug Configurations")," setting. Check the ",(0,a.kt)("inlineCode",{parentName:"p"},'Add Dependencies with "Provided" scope to classpath')," option."),(0,a.kt)("p",null,(0,a.kt)("img",{src:n(43846).Z,width:"1006",height:"964"})),(0,a.kt)("h2",{id:"6-start-fe"},"6. Start FE"),(0,a.kt)("p",null,"Having fun with Doris FE!"))}m.isMDXComponent=!0},93085:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/DEBUG4-7c5b94bf36d5b38026f522c90c4d964c.png"},92497:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/DEBUG5-48854eb83a0abb0802393856c6eaf770.png"},21526:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/gen_code-eb0ee5102336c3ea5da6c7e9e481180b.png"},43846:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/idea_options-24ec83b18a96c669b6e525cc31bde067.png"}}]);