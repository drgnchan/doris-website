"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[71185],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>E});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),u=i,E=m["".concat(s,".").concat(u)]||m[u]||d[u]||r;return n?a.createElement(E,o(o({ref:t},c),{},{components:n})):a.createElement(E,o({ref:t},c))}));function E(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[m]="string"==typeof e?e:i,o[1]=l;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},79573:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const r={title:"CREATE-JOB",language:"en"},o=void 0,l={unversionedId:"sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-JOB",id:"sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-JOB",title:"CREATE-JOB",description:"\x3c!--",source:"@site/docs/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-JOB.md",sourceDirName:"sql-manual/sql-reference/Data-Definition-Statements/Create",slug:"/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-JOB",permalink:"/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-JOB",draft:!1,tags:[],version:"current",frontMatter:{title:"CREATE-JOB",language:"en"},sidebar:"docs",previous:{title:"CREATE-INDEX",permalink:"/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-INDEX"},next:{title:"CREATE-VIEW",permalink:"/docs/dev/sql-manual/sql-reference/Data-Definition-Statements/Create/CREATE-VIEW"}},s={},p=[{value:"CREATE-JOB",id:"create-job",level:2},{value:"Name",id:"name",level:3},{value:"Description",id:"description",level:3},{value:"Example",id:"example",level:3},{value:"Keywords",id:"keywords",level:3},{value:"Best Practice",id:"best-practice",level:3}],c={toc:p},m="wrapper";function d(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"create-job"},"CREATE-JOB"),(0,i.kt)("h3",{id:"name"},"Name"),(0,i.kt)("p",null,"CREATE JOB"),(0,i.kt)("h3",{id:"description"},"Description"),(0,i.kt)("p",null,"Doris Job is a task that runs according to a predetermined plan and is used to trigger predefined actions at a specific time or at a specified time interval, thereby helping us to automate some tasks. Functionally, it is similar to the operating system's\nTiming tasks (such as: cron in Linux, scheduled tasks in Windows). But Doris's job scheduling can be accurate to the second level."),(0,i.kt)("p",null,"There are two types of jobs: ",(0,i.kt)("inlineCode",{parentName:"p"},"ONE_TIME")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"BATCH"),". Among them, the ",(0,i.kt)("inlineCode",{parentName:"p"},"ONE_TIME")," type Job will be triggered at the specified time point, which is mainly used for one-time tasks, while the ",(0,i.kt)("inlineCode",{parentName:"p"},"BATCH")," type Job will be triggered cyclically within the specified time interval.\nMainly used for tasks that are executed periodically."),(0,i.kt)("p",null,"Currently only ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"ADMIN"))," permissions are supported for this operation."),(0,i.kt)("p",null,"grammar:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE\n     job\n     job_name\n     ON SCHEDULE schedule\n     [COMMENT 'string']\n     DO sql_body;\n\nschedule: {\n    AT timestamp\n    | EVERY interval\n     [STARTS timestamp]\n     [ENDS timestamp ]\n}\n\ninterval:\n     quantity { DAY | HOUR | MINUTE |\n               WEEK | SECOND }\n")),(0,i.kt)("p",null,"A valid Job statement must contain the following"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The keyword CREATE JOB plus the job name, which identifies unique events within a db."),(0,i.kt)("li",{parentName:"ul"},"The ON SCHEDULE clause, which specifies the type of Job and when and how often to trigger it."),(0,i.kt)("li",{parentName:"ul"},"The DO clause, which specifies the actions that need to be performed when the Job job is triggered.")),(0,i.kt)("p",null,"Here is a minimal example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE JOB my_job ON SCHEDULE EVERY 1 MINUTE DO INSERT INTO db1.tbl1 SELECT * FROM db2.tbl2;\n")),(0,i.kt)("p",null,"This statement means to create a job named my_job to be executed every minute, and the operation performed is to import the data in db2.tbl2 into db1.tbl1."),(0,i.kt)("p",null,"The SCHEDULER statement is used to define the execution time, frequency and duration of the job, which can specify a one-time job or a periodic job."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"AT timestamp"),(0,i.kt)("p",{parentName:"li"},"For one-time events, it specifies that the event is only executed once at a given date and time timestamp, which must contain the date and time")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"EVERY"),(0,i.kt)("p",{parentName:"li"},"Indicates that the operation is repeated periodically, which specifies the execution frequency of the job. After the keyword, a time interval should be specified, which can be days, hours, minutes, seconds, and weeks."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"interval")),(0,i.kt)("p",{parentName:"li"},"Used to specify the job execution frequency, it can be days, hours, minutes, seconds, weeks. For example: ",(0,i.kt)("inlineCode",{parentName:"p"},"1 DAY")," means execute once a day, ",(0,i.kt)("inlineCode",{parentName:"p"},"1 HOUR")," means execute once an hour, ",(0,i.kt)("inlineCode",{parentName:"p"},"1 MINUTE")," means execute once every minute, ",(0,i.kt)("inlineCode",{parentName:"p"},"1 WEEK")," means execute once a week, ",(0,i.kt)("inlineCode",{parentName:"p"},"1 SECOND")," means execute once every second ."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"STARTS timestamp"),(0,i.kt)("p",{parentName:"li"},"   It is used to specify the start time of the job. If not specified, it will be executed from the next time point of the current time.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"ENDS timestamp"),(0,i.kt)("p",{parentName:"li"},"   Used to specify the end time of the job, if not specified, it means permanent execution.")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"DO"),(0,i.kt)("p",{parentName:"li"},"It is used to specify the operation that needs to be performed when the job is triggered. Currently, all ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"INSERT, UPDATE"))," operations are supported. We will support more operations in the future."))),(0,i.kt)("h3",{id:"example"},"Example"),(0,i.kt)("p",null,"Create a one-time job, which will be executed once at 2020-01-01 00:00:00, and the operation performed is to import the data in db2.tbl2 into db1.tbl1."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"\nCREATE JOB my_job ON SCHEDULE AT '2020-01-01 00:00:00' DO INSERT INTO db1.tbl1 SELECT * FROM db2.tbl2;\n\n")),(0,i.kt)("p",null,"Create a periodic Job, which will start to execute at 2020-01-01 00:00:00, once a day, and the operation is to import the data in db2.tbl2 into db1.tbl1."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE JOB my_job ON SCHEDULE EVERY 1 DAY STARTS '2020-01-01 00:00:00' DO INSERT INTO db1.tbl1 SELECT * FROM db2.tbl2 WHERE create_time >= days_add(now(),-1);\n")),(0,i.kt)("p",null,"Create a periodic Job, which will start to execute at 2020-01-01 00:00:00, and execute once a day. The operation performed is to import the data in db2.tbl2 into db1.tbl1. This Job will be executed in 2020 Ends at -01-01 00:10:00."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE JOB my_job ON SCHEDULER EVERY 1 DAY STARTS '2020-01-01 00:00:00' ENDS '2020-01-01 00:10:00' DO INSERT INTO db1.tbl1 SELECT * FROM db2.tbl2 create_time >= days_add (now(),-1);\n")),(0,i.kt)("h3",{id:"keywords"},"Keywords"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"CREATE, JOB\n")),(0,i.kt)("h3",{id:"best-practice"},"Best Practice"))}d.isMDXComponent=!0}}]);